### Looting Events

namespace=artifact

#Duel inheritance
character_event={
	id=artifact.1
	
	is_triggered_only=yes

	hide_window=yes
	
	immediate={
		if={
			limit={ has_artifact=horse_firestar }
			random={
				chance=50
				modifier={
					factor=0.2
					has_character_flag=flag_duel_friendly
				}
				set_character_flag=artifact_lost
				random_artifact={
					limit={
						artifact_type=horse_firestar
					}
					save_event_target_as=target_artifact
				}
			}
		}
		if={
			limit={ has_artifact=horse_greylightning }
			random={
				chance=50
				modifier={
					factor=0.2
					has_character_flag=flag_duel_friendly
				}
				set_character_flag=artifact_lost
				random_artifact={
					limit={
						artifact_type=horse_greylightning
					}
					save_event_target_as=target_artifact
				}
			}
		}
		if={
			limit={ has_artifact=horse_hexmark }
			random={
				chance=50
				modifier={
					factor=0.2
					has_character_flag=flag_duel_friendly
				}
				set_character_flag=artifact_lost
				random_artifact={
					limit={
						artifact_type=horse_hexmark
					}
					save_event_target_as=target_artifact
				}
			}
		}
		if={
			limit={ has_artifact=horse_redhare }
			random={
				chance=50
				modifier={
					factor=0.2
					has_character_flag=flag_duel_friendly
				}
				set_character_flag=artifact_lost
				random_artifact={
					limit={
						artifact_type=horse_redhare
					}
					save_event_target_as=target_artifact
				}
			}
		}
		if={
			limit={ has_artifact=horse_shadowrunner }
			random={
				chance=50
				modifier={
					factor=0.2
					has_character_flag=flag_duel_friendly
				}
				set_character_flag=artifact_lost
				random_artifact={
					limit={
						artifact_type=horse_shadowrunner
					}
					save_event_target_as=target_artifact
				}
			}
		}
		if={
			limit={ has_artifact=weapon_ancestralsword }
			random={
				chance=50
				modifier={
					factor=0.2
					has_character_flag=flag_duel_friendly
				}
				set_character_flag=artifact_lost
				random_artifact={
					limit={
						artifact_type=weapon_ancestralsword
					}
					save_event_target_as=target_artifact
				}
			}
		}
		if={
			limit={ has_artifact=weapon_flail }
			random={
				chance=50
				modifier={
					factor=0.2
					has_character_flag=flag_duel_friendly
				}
				set_character_flag=artifact_lost
				random_artifact={
					limit={
						artifact_type=weapon_flail
					}
					save_event_target_as=target_artifact
				}
			}
		}
		if={
			limit={ has_artifact=weapon_flyingsword }
			random={
				chance=50
				modifier={
					factor=0.2
					has_character_flag=flag_duel_friendly
				}
				set_character_flag=artifact_lost
				random_artifact={
					limit={
						artifact_type=weapon_flyingsword
					}
					save_event_target_as=target_artifact
				}
			}
		}
		if={
			limit={ has_artifact=weapon_greataxe }
			random={
				chance=50
				modifier={
					factor=0.2
					has_character_flag=flag_duel_friendly
				}
				set_character_flag=artifact_lost
				random_artifact={
					limit={
						artifact_type=weapon_greataxe
					}
					save_event_target_as=target_artifact
				}
			}
		}
		if={
			limit={ has_artifact=weapon_greendragon }
			random={
				chance=50
				modifier={
					factor=0.2
					has_character_flag=flag_duel_friendly
				}
				set_character_flag=artifact_lost
				random_artifact={
					limit={
						artifact_type=weapon_greendragon
					}
					save_event_target_as=target_artifact
				}
			}
		}
		if={
			limit={ has_artifact=weapon_handspear }
			random={
				chance=50
				modifier={
					factor=0.2
					has_character_flag=flag_duel_friendly
				}
				set_character_flag=artifact_lost
				random_artifact={
					limit={
						artifact_type=weapon_handspear
					}
					save_event_target_as=target_artifact
				}
			}
		}
		if={
			limit={ has_artifact=weapon_scimitarsword }
			random={
				chance=50
				modifier={
					factor=0.2
					has_character_flag=flag_duel_friendly
				}
				set_character_flag=artifact_lost
				random_artifact={
					limit={
						artifact_type=weapon_scimitarsword
					}
					save_event_target_as=target_artifact
				}
			}
		}
		if={
			limit={ has_artifact=weapon_serpentspear }
			random={
				chance=50
				modifier={
					factor=0.2
					has_character_flag=flag_duel_friendly
				}
				set_character_flag=artifact_lost
				random_artifact={
					limit={
						artifact_type=weapon_serpentspear
					}
					save_event_target_as=target_artifact
				}
			}
		}
		if={
			limit={ has_artifact=weapon_serpentspear2 }
			random={
				chance=50
				modifier={
					factor=0.2
					has_character_flag=flag_duel_friendly
				}
				set_character_flag=artifact_lost
				random_artifact={
					limit={
						artifact_type=weapon_serpentspear2
					}
					save_event_target_as=target_artifact
				}
			}
		}
		if={
			limit={ has_artifact=weapon_shootingstar }
			random={
				chance=50
				modifier={
					factor=0.2
					has_character_flag=flag_duel_friendly
				}
				set_character_flag=artifact_lost
				random_artifact={
					limit={
						artifact_type=weapon_shootingstar
					}
					save_event_target_as=target_artifact
				}
			}
		}
		if={
			limit={ has_artifact=weapon_skypiercer }
			random={
				chance=50
				modifier={
					factor=0.2
					has_character_flag=flag_duel_friendly
				}
				set_character_flag=artifact_lost
				random_artifact={
					limit={
						artifact_type=weapon_skypiercer
					}
					save_event_target_as=target_artifact
				}
			}
		}
		if={
			limit={ has_artifact=weapon_sevenstar }
			random={
				chance=50
				modifier={
					factor=0.2
					has_character_flag=flag_duel_friendly
				}
				set_character_flag=artifact_lost
				random_artifact={
					limit={
						artifact_type=weapon_sevenstar
					}
					save_event_target_as=target_artifact
				}
			}
		}
		if={
			limit={ has_artifact=weapon_swordfate }
			random={
				chance=50
				modifier={
					factor=0.2
					has_character_flag=flag_duel_friendly
				}
				set_character_flag=artifact_lost
				random_artifact={
					limit={
						artifact_type=weapon_swordfate
					}
					save_event_target_as=target_artifact
				}
			}
		}
		if={
			limit={ has_artifact=weapon_swordheaven }
			random={
				chance=50
				modifier={
					factor=0.2
					has_character_flag=flag_duel_friendly
				}
				set_character_flag=artifact_lost
				random_artifact={
					limit={
						artifact_type=weapon_swordheaven
					}
					save_event_target_as=target_artifact
				}
			}
		}
		if={
			limit={ has_artifact=weapon_swordlight }
			random={
				chance=50
				modifier={
					factor=0.2
					has_character_flag=flag_duel_friendly
				}
				set_character_flag=artifact_lost
				random_artifact={
					limit={
						artifact_type=weapon_swordlight
					}
					save_event_target_as=target_artifact
				}
			}
		}
		if={
			limit={ has_artifact=weapon_thornmace }
			random={
				chance=50
				modifier={
					factor=0.2
					has_character_flag=flag_duel_friendly
				}
				set_character_flag=artifact_lost
				random_artifact={
					limit={
						artifact_type=weapon_thornmace
					}
					save_event_target_as=target_artifact
				}
			}
		}
		if={
			limit={ has_artifact=weapon_trident }
			random={
				chance=50
				modifier={
					factor=0.2
					has_character_flag=flag_duel_friendly
				}
				set_character_flag=artifact_lost
				random_artifact={
					limit={
						artifact_type=weapon_trident
					}
					save_event_target_as=target_artifact
				}
			}
		}
		if={
			limit={ has_artifact=weapon_twincrescent }
			random={
				chance=50
				modifier={
					factor=0.2
					has_character_flag=flag_duel_friendly
				}
				set_character_flag=artifact_lost
				random_artifact={
					limit={
						artifact_type=weapon_twincrescent
					}
					save_event_target_as=target_artifact
				}
			}
		}
		
		if={			
			limit={ has_character_flag=artifact_lost }
			clr_character_flag=artifact_lost
			event_target:target_artifact={
				transfer_artifact={
					from=ROOT to=FROMFROM
				}
			}
			FROMFROM={
				character_event={ id=artifact.2 }
			}
		}
	}
}

#Duel inheritance
character_event={
	id=artifact.2
	desc="EVTDESC_artifact.2"
	picture="GFX_evt_weapon"
	
	is_triggered_only=yes
	
	option={
		name="EXCELLENT"
	}
}